<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>Change Password</title>
    <link rel="stylesheet" href="/static/main.css"/>
  </head>
  <body>
    <div class="container" style="max-width:520px;">
      <h1>Change Password</h1>
      <p class="muted">Enter your current password and a new one (min 6 characters).</p>

      {% with ok = get_flashed_messages(category_filter=['ok']), err = get_flashed_messages(category_filter=['error']) %}
        {% if ok %}<div class="card" style="background:#ecfdf5; color:#064e3b; margin-bottom:12px;">{{ ok[0] }}</div>{% endif %}
        {% if err %}<div class="card" style="background:#fee2e2; color:#7f1d1d; margin-bottom:12px;">{{ err[0] }}</div>{% endif %}
      {% endwith %}

      <div class="card">
        <form action="/me/password" method="post" class="row" style="gap:12px; flex-direction:column;">
          <div><div class="label">Current Password</div><input class="input" name="old_password" type="password" required></div>
          <div><div class="label">New Password</div><input class="input" name="new_password" type="password" minlength="6" required></div>
          <div>
            <button class="btn" type="submit">Update Password</button>
            <a class="btn" href="/me" style="background:#475569; margin-left:8px;">Back</a>
          </div>
        </form>
      </div>
    </div>
  </body>
</html>